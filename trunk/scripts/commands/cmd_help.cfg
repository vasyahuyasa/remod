// list commands
cmd_help = [
	if (=s $arg2 "") [
		res = ""
		perm = (? (isadmin $arg1) (? (ismaster $arg1) 3 2) 1)
		cmd_list = (commandslist $perm)

		loop i (listlen $cmd_list) [   
			res = (concatword $res " #" (at $cmd_list $i)) 	
		]
		pm $arg1 (format "^f1Server commands:^f0%1" $res) 
	] [
		help = (commandhelp $arg2)
		if (=s $help "") [
			(unknown_command $arg1 $arg2)
		] [
			pm $arg1 (usage $arg2)
		]
	]
]

registercommand "help" cmd_help 1 "|s" "^help (command) ^f1Shows info about command or lists server commands"
