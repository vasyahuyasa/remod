// Some general database staff

// databases handlers
sqlite3_dbh = -1

// sqlite3
sqlite3_init = [
	// close if already opened
	if (!= $sqlite3_dbh -1) [
		sqlite3_close $sqlite3_dbh
	]
	sqlite3_dbh = ( sqlite3_open $sqlite3_db )

	// check for error
	if (= $sqlite3_dbh -1) [
		// print error
		echo (format "sqlite3: can not open %1" $sqlite3_db)
	]
]

// init databases
cases $preferdb "sqlite3" [
	sqlite3_init
] "mysql" [ // not supported yet
	
] () [ // default

]
