//here standart events' handlers are described

//------ onconnect [cn] ------//
irc_onconnect = [ ircsay (ircblue (format "CONNECT %1(%2) (%3)" (getname $arg1) $arg1 (getcountry (getip $arg1)))) ]
addhandler onconnect irc_onconnect

srv_onconnect = [ say (format "^f0%1 ^f7is connected from ^f0%2" (getname $arg1) (getcountry (getip $arg1))) ]
addhandler onconnect srv_onconnect

log_onconnect = [ echo (format "[remod] CONNECT %1(%2)(%3)" (getname $arg1) $arg1 (getip $arg1) ) ]
addhandler onconnect log_onconnect



//------ ondisconnect [cn] ------//
irc_ondisc = [ ircsay (ircblue (format "DISCONNECT %1(%2) - Connection time: %3" (getname $arg1) $arg1 (formatmillis "%hh %mm %ss" (getonline $arg1)))) ]
addhandler ondisconnect irc_ondisc

log_ondisc = [ echo (format "[remod] DISCONNECT %1(%2) - Connection time: %3" (getname $arg1) $arg1 (formatmillis "%hh %mm %ss" (getonline $arg1))) ]
addhandler ondisconnect log_ondisc



//------ @ontext [cn] [msg] ------//
irc_text = [ 
	if (ismuted $arg1) [
		ircsay (format "%1(%2): %3" (getname $arg1) $arg1 $arg2) 
	]
]
addhandler ontext irc_text

log_text = [ echo (format "[remod] %1(%2): %3" (getname $arg1) $arg1 $arg2) ]
addhandler ontext log_text



//------ onmapstart ------//
irc_mapstart = [ ircsay (ircgreen (format "MAP CHANGED: %1 %2" (modetostr (getmode)) (getmap)) ) ]
addhandler onmapstart irc_mapstart

log_mapstart = [ echo (format "[remod] MAP CHANGED: %1 %2" (modetostr (getmode)) (getmap) ) ]
addhandler onmapstart log_mapstart



//------ onspectator [cn] [1|0] ------//
//srv_onspec = [ say (format "%1  is %2 now" (orange (getname $arg1)) (? $arg2 "spectated" "unspectated") ) ]
//addhandler onspectator srv_onspec

//log_onspec = [ echo (format "[remod] PLAYER: %1(%2) is %2 now" (getname $arg1) $arg1 (? $arg2 "spectated" "unspectated") ) ]
//addhandler onspectator log_onspec



//------ onsetmaster [cn] [1|0] [passhash] [authname] ------//
//srv_onmaster = [ say (format "%1 master status is ^f2%2^f7  (authname: ^f5%3^f7)" (getname $arg1) $arg2 $arg4 ) ]
//addhandler onmaster srv_onmaster

irc_onsetmaster = [
	txt = (format "%1 %2(%3) %4 master" (ircgreen "MASTER:")  (getname $arg1) $arg1 (? $arg2 "claimed" "relinquished"))
	if (!=s $arg4 "") [ txt = (format "%1 as '%2'" $txt $arg4) ]    
	ircsay $txt
]
addhandler onsetmaster irc_onsetmaster


log_master = [ 
	txt = (format "[remod] MASTER: %1(%2) %3 master" (getname $arg1) $arg1 (? $arg2 "claimed" "relinquished"))
	if (!=s $arg4 "") [ txt = (format "%1 as '%2'" $txt $arg4) ]  
	echo $txt
]
addhandler onmaster log_master



//------ oncommand ------//
//srv_oncommand = [ say (format "USER %1 run command '%2'" (getname $arg1) $arg2) ]
//addhandler oncommand srv_oncommand
//log_oncommand = [ echo (format "%1 #command: %2" $arg1 $arg2) ]
//addhandler oncommand log_oncommand


//------ onimission ------//

//------ onteamkill [cn] ------//



//------ @onsayteam [cn] [msg] ------//
log_onsayteam = [ echo (format "[remod] %1(%2) sayed to team: %3" (getname $arg1) $arg1 $arg2) ]
addhandler onsayteam log_onsayteam



//------ @onmastermode [cn] [mode] ------//
irc_onmastermode = [ ircsay (ircorange (format "MM: %1(%2) set mastermode to %3" (getname $arg1) $arg1 $arg2) ) ]
addhandler onmastermode irc_onmastermode

log_onmastermode = [ echo (format "[remod] MM: %1(%2) set mastermode to %3" (getname $arg1) $arg1 $arg2 ) ]
addhandler onmastermode log_onmastermode




//------ @onswitchname [cn] [newname] ------//
//srv_onswitchname = [ say (format "%1 is now known as %2"  (orange (getname $arg1)) (orange $arg2) ) ]
//addhandler onswitchname srv_onswitchname

irc_onswitchname = [ ircsay (ircblue (format "%1(%2) is now known as %3" (ircorange (getname $arg1)) $arg1 (ircorange $arg2) ) ) ]
addhandler onswitchname irc_onswitchname

log_onswitchname = [ echo (format "[remod] %1(%2) is now known as %3" (getname $arg1) $arg1 $arg2) ]
addhandler onswitchname log_onswitchname


//------ onswitchmodel [cn] [mdl] ------//



//------ @onswitchteam [cn] [newteam] ------//
//irc_onswitchteam = [ ircsay (ircblue (format "%1(%2) switched to team %3" (getname $arg1) $arg1 (ircorange $arg2) ) )]
//addhandler onswitchteam irc_onswitchteam

log_onswitchteam = [ echo (format "[remod] %1(%2) switched to team %3" (getname $arg1) $arg1 $arg2) ]
addhandler onswitchteam log_onswitchteam



//------ onmapvote [cn] [map] [mode] ------//

//------ @onclearbans [cn] ------//
irc_onclearbans = [ ircsay (ircblue (format "%1(%2) cleared all bans" (getname $arg1) $arg1 ) ) ]
addhandler onclearbans irc_onclearbans

log_onclearbans = [ echo (format "[remod] KB: %1(%2) cleared all bans" (getname $arg1) $arg1 ) ]
addhandler onclearbans log_onclearbans


//------ @onkick [cn] [victim] ------//
irc_onkick = [ ircsay (ircred (format "KB: %1(%2) was kicked from server by %3(%4)" (getname $arg2) $arg2 (getname $arg1) $arg1 ) ) ]
addhandler onkick irc_onkick

log_onkick = [ echo (format "[remod] KB: %1(%2) was kicked from server by %3(%4)" (getname $arg2) $arg2 (getname $arg1) $arg1 ) ]
addhandler onkick log_onkick


//------ @onsetteam [cn] [newteam] ------//
irc_onsetteam = [ ircsay (ircblue (format "%1(%2) was forced to team %3" (getname $arg1) $arg1 (ircorange $arg2) ) )]
addhandler onsetteam irc_onsetteam

log_onsetteam = [ echo (format "[remod] %1(%2) was frced to team %3" (getname $arg1) $arg1 $arg2) ]
addhandler onsetteam log_onsetteam


// /* DEMOS */
//------ @onrecorddemo ------//
//------ onstopdemo ------//
//------ @oncleardemos [demonum] ------//
//------ @onlistdemos [cn] ------//
//------ @ongetdemo [cn] [demonum] ------//
// /* END OF DEMOS */



// /* BOTS */
//------ @onaddbot [skill] ------//
irc_onaddbot = [ ircsay  (format "Bot with %1 was added" (? (> $arg1 -1) (concat "skill" $arg1) "random skill")) ]
addhandler onaddbot irc_onaddbot

log_onaddbot = [ echo (format "[remod] Bot with %1 was added" (? (> $arg1 -1) (concat "skill" $arg1) "random skill")) ]
addhandler onaddbot log_onaddbot


//------ @ondelbot ------//
irc_ondelbot = [ ircsay  "One bot was deleted" ]
addhandler ondelbot irc_ondelbot

log_ondelbot = [ echo "[remod] One bot was deleted"]
addhandler ondelbot log_ondelbot



//------ onbotlimit [cn] [limit] ------//
//------ onbotbalance [cn] [balance] ------//
// /* END OF BOTS */



//------ @onpausegame [1|0] ------//
//srv_onpausegame = [ echo (blue(? $arg1 "Game was paused" "Game was resumed")) ]
//addhandler onpausegame srv_onpausegame

irc_onpausegame = [ ircsay (ircgreen (? $arg1 "Game was paused" "Game was resumed") ) ]
addhandler onpausegame irc_onpausegame

log_onpausegame = [ echo (concatword "[remod] " (? $arg1 "Game was paused" "Game was resumed")) ]
addhandler onpausegame log_onpausegame



//------ onmodmap [cn] ------//
//srv_onmodmap = [ say (format "^f3%1(%2)^f7 has modified map!"  (getname $arg1) $arg1  ) ]
//addhandler onmodmap srv_onmodmap

irc_onmodmap = [ ircsay (ircred (format "%1(%2) has  modified map!" (getname $arg1) $arg1 ) ) ]
addhandler onmodmap irc_onmodmap

log_onmodmap = [ echo (format "[remod] KB: %1(%2) has  modified map!" (getname $arg1) $arg1 ) ]
addhandler onmodmap log_onmodmap

