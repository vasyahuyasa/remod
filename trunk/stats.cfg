bestfrag = [
	bfrag = -1;
	bfrager = -1;
	loop i $maxclients [
		numfrag = (getfrags $i);
		if (> $numfrag bfrag) [
			bfrag = $numfrag;
			bfrager = $i
			];
	]
	result $bfrager;
]

bestdeath = [
	bdeath = -1;
	bdeather = -1;
	loop i $maxclients [
		numdeath = (getdeaths $i);    
		if (> $numdeath bdeath) [
			bdeath = $numdeath;
			bdeather = $i
			];
	]
	result $bdeather;
]

bestacc = [
	bacc = -1;
	baccer = -1;
	loop i $maxclients [
		numacc = (getaccuracy $i);
		if (> $numacc bacc) [
			bacc = $numacc;
			baccer = $i
			];
	]
	result $baccer;
]

svr_showbest = [
	awdline = "^f3Awards:";
	bfrager = (bestfrag);     
	bfrags = (getfrags $bfrager); 
	if (> $bfrags 40) [ awdline = (concat $awdline (format "^f1Frags: ^f7%1 ^f1(^f6%2^f1)" (getname $bfrager) $bfrags)) ];
	
	bdeather = (bestdeath);
	bdeaths = (getdeaths $bdeather)
	if (> $bdeaths 30) [ awdline = (concat $awdline (format "^f1Cannon foder: ^f7%1 ^f1(^f6%2^f1)" (getname $bdeather) $bdeaths)) ];
	
	baccer = (bestacc); 
	bacc = (getaccuracy $baccer);
	if (> $bacc 30) [ awdline = (concat $awdline (format "^f1Accuracy: ^f7%1 ^f1(^f6%2%%^f1)" (getname $baccer) $bacc)) ];
	
	say $awdline;
]

irc_showbest = [
	awdline = "GAME ENDED";
	bfrager = (bestfrag);     
	bfrags = (getfrags $bfrager); 
	if (> $bfrags 40) [ awdline = (concat $awdline (format "Frags: %1 (%2/%3 %4%%)" (getname $bfrager) $bfrags (getdeaths $bfrager) (getaccuracy $bfrager))) ];
	
	bdeather = (bestdeath);
	bdeaths = (getdeaths $bdeather)
	if (> $bdeaths 30) [ awdline = (concat $awdline (format "Cannon foder: %1 (%2/%3 %4%%)" (getname $bdeather) (getfrags $bdeather) $bdeaths (getaccuracy $bdeather))) ];
	
	baccer = (bestacc); 
	bacc = (getaccuracy $baccer);
	if (> $bacc 30) [ awdline = (concat $awdline (format "^f1Accuracy: ^f7%1 ^f1(^f6%2%%^f1)" (getname $baccer) $bacc)) ];
	
	say $awdline;
]

addhandler onimission svr_showbest
//addhandler onimission irc_showbest

